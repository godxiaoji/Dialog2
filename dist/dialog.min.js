/*! dialog.js 2.0.0 https://github.com/godxiaoji */ (function(){var c=document.documentElement,e=document.body;function d(k,j){return k.nodeType===1&&(" "+k.className+" ").indexOf(" "+j+" ")>=0}function g(){return Math.max(c.scrollHeight,e.scrollHeight)}function h(){return c.scrollTop||e.scrollTop}function i(){return Math.min(c.clientHeight,e.clientHeight)}function f(j){if(!f.multi){f.clear()}var k=new b(j);return f.list[k.id]=k}f.guid=0;f.multi=false;f.list={};f.clear=function(){for(var j in f.list){if(f.list.hasOwnProperty(j)){f.list[j].remove()}}};f.getDialog=function(j){var k=document.createElement("div");k.id=j.id?j.id:"J_Dialog"+(++f.guid);k.className="dialog-wrapper "+(j.wrapperClass||"");k.style.display="none";k.innerHTML=['<div class="dialog-box" style="opacity: 0">','<div class="dialog-box-inner">','<div class="dialog-hd"><a class="dialog-x '+(j.hideClose?"dialog-hidden":"")+'" href="javascript:void(0);">'+(j.closeValue||"×")+"</a><span>"+(j.title!=null?j.title:"提示")+"</span></div>",'<div class="dialog-bd">'+(j.content!=null?j.content:"内容")+"</div>",'<div class="dialog-ft">','<a class="dialog-btn dialog-cancel '+(j.onCancel?"":"dialog-hidden")+'" href="'+(j.cancelUrl||"javascript:void(0);")+'" '+(j.cancelUrl?'target="_blank"':"")+">"+(j.cancelValue!=null?j.cancelValue:"取消")+"</a>",'<a class="dialog-btn dialog-ok '+(j.onOk?"":"dialog-hidden")+'" href="'+(j.okUrl||"javascript:void(0);")+'" '+(j.okUrl?'target="_blank"':"")+">"+(j.okValue!=null?j.okValue:"确定")+"</a></div>","</div>","</div>"].join("");e.appendChild(k);return k};function b(n){if(typeof n==="string"||typeof n==="number"){n={content:n}}else{n=n||{}}var t=this,o=f.getDialog(n);this.id=o.id;this.$wrapper=o;this.$box=o.querySelector(".dialog-box");function s(v){var u=false;if(typeof n.onClose==="function"){u=n.onClose()}else{if(typeof n.onCancel==="function"){u=n.onCancel()}}if(u!==true){t.remove()}v.stopPropagation()}function k(v){var u=false;if(typeof n.onCancel==="function"){u=n.onCancel()}if(u!==true){t.remove()}v.stopPropagation()}function r(v){var u=false;if(typeof n.onOk==="function"){u=n.onOk()}if(u!==true){t.remove()}v.stopPropagation()}var l=o.querySelector(".dialog-ok"),q=o.querySelector(".dialog-cancel"),j=o.querySelector(".dialog-x"),m=o.querySelector(".dialog-box-inner");l.addEventListener("click",r,false);q.addEventListener("click",k,false);j.addEventListener("click",s,false);if(n.quickClose){o.addEventListener("click",s,false)}if(n.autoShow!==false){this.show()}if(n.onBoxClick){var p=null;if(typeof n.onBoxClick==="string"){if(n.onBoxClick==="ok"){p=r}else{if(n.onBoxClick==="cancel"){p=k}else{if(n.onBoxClick==="close"){p=s}}}}else{if(typeof n.onBoxClick==="function"){p=function(u){if(n.onBoxClick()!==true){t.remove()}u.stopPropagation()}}}if(p){m.addEventListener("click",p,false)}}return this}b.prototype={hide:function(){this.$wrapper.style.opacity=0;this.status="hide";var k,j=false;for(k in f.list){if(f.list[k].status==="show"){j=true}}return this},adapt:function(){this.$box.style.top=(h()+Math.max((i()-this.$box.offsetHeight)/2,0))+"px";this.$wrapper.style.height=g()+"px"},show:function(){this.status="show";this.$wrapper.style.cssText=["position: fixed","top: 0","left: 0","width: 100%","height: 0"].join(";");this.$box.style.cssText=["position: fixed","top: 0","left: 0","width: 100%"].join(";");this.adapt();this.$wrapper.classList.add("show");return this},remove:function(){if(this.status==="show"){this.hide();this.$wrapper.parentNode.removeChild(this.$wrapper);delete f.list[this.id]}return this}};var a;if(window.addEventListener){window.addEventListener("resize",function(j){clearTimeout(a);a=setTimeout(function(){for(var k in f.list){if(f.list.hasOwnProperty(k)){f.list[k].adapt()}}},100)},false)}window.Dialog=f})();